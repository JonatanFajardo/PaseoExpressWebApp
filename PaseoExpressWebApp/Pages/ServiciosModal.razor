@page "/ServiciosModal"
@attribute [Authorize(Roles = "propietario")]
@using PaseoExpressWebApp.Context;
@using Microsoft.AspNetCore.Components.Forms
@using System.ComponentModel.DataAnnotations

  <div class="container">
    <EditForm Model="@servicio">
        <ValidationSummary class="alert alert-danger" />

        <!-- Sección: Información General del Servicio -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-clipboard-list me-2"></i>Información General del Servicio</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Título</label>
                            <InputText @bind-Value="servicio.Titulo" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Descripción</label>
                            <InputText @bind-Value="servicio.Descripcion" class="form-control" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Fecha del Servicio</label>
                            <InputDate @bind-Value="servicio.FechaServicio" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Próxima Fecha de Mantenimiento</label>
                            <InputDate @bind-Value="servicio.ProximaFechaMantenimiento" class="form-control" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Marca</label>
                            <InputText @bind-Value="servicio.Marca" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Ubicación en Automóvil</label>
                            <InputText @bind-Value="servicio.UbicacionEnAutomovil" class="form-control" disabled />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección: Información del Vehículo -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-car me-2"></i>Información del Vehículo</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Marca del Vehículo</label>
                            <InputText @bind-Value="servicio.VehiculoMarca" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Modelo del Vehículo</label>
                            <InputText @bind-Value="servicio.VehiculoModelo" class="form-control" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Año del Vehículo</label>
                            <InputNumber @bind-Value="servicio.VehiculoAnio" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Millaje del Vehículo</label>
                            <InputNumber @bind-Value="servicio.MillajeVehiculo" class="form-control" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Próximo Millaje</label>
                            <InputNumber @bind-Value="servicio.ProximoMillaje" class="form-control" disabled />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección: Costos y Precios -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-dollar-sign me-2"></i>Costos y Precios</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Costo Total</label>
                            <InputNumber @bind-Value="servicio.CostoTotal" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Precio en Mano de Obra</label>
                            <InputNumber @bind-Value="servicio.PrecioManoObra" class="form-control" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Mano de Obra Personal</label>
                            <InputNumber @bind-Value="servicio.ManoObraPersonal" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Viáticos</label>
                            <InputText @bind-Value="servicio.Viaticos" class="form-control" disabled />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección: Estado del Servicio -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-check-circle me-2"></i>Estado del Servicio</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Recurrente</label>
                            <InputText @bind-Value="EsRecurrente" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-group mb-3">
                            <label class="form-label">Confirmado</label>
                            <InputText @bind-Value="Confirmado" class="form-control" disabled />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </EditForm>
    </div>

       
@code {
    [CascadingParameter]
    public MudDialogInstance MudDialog { get; set; }

    [Parameter]
    public PR_ObtenerServiciosPorVehiculoResult servicio { get; set; }
    private void Submit() => MudDialog.Close(DialogResult.Ok(true));
    private void Cancel() => MudDialog.Cancel();
    string EsRecurrente;
    string Confirmado;

    protected override async Task OnInitializedAsync()
    {
        EsRecurrente = servicio.EsRecurrente ? "Sí" : "No";
        Confirmado = servicio.Confirmado ? "Sí" : "No";
        var servicio2 = servicio;
        setServicio();
    }
     private void setServicio()
     {
         servicio.IdServicios = 0;
        servicio.IdTipoServicio = 1;
        servicio.TipoServicio = "Desconocido";
        servicio.Imagenes = string.Empty;
        servicio.Titulo = "Sin título";
        servicio.Descripcion = "Sin descripción";
        servicio.FechaServicio = DateTime.Now;
        //servicio.CantidadComprada = 0;
        //servicio.CostoUnitario = 0.00m;
        servicio.CostoTotal = 0;
        servicio.Marca = "Genérica";
        servicio.IdTipoMantenimiento = 0;
        servicio.TipoMantenimiento = "N/A";
        //servicio.KilometrajeVehiculo = 0;
        servicio.MillajeVehiculo = 0;
        servicio.ProximaFechaMantenimiento = DateTime.Now;
        servicio.IdVehiculo = 0;
        servicio.VehiculoMarca = "Sin marca";
        servicio.VehiculoModelo = "Sin modelo";
        servicio.VehiculoAnio = 1;
        servicio.EsRecurrente = false;
        //servicio.ProximoKilometraje = 1;
        servicio.ProximoMillaje = 1;
        servicio.IdUbicacionEnAutomovil = 1;
        servicio.UbicacionEnAutomovil = "N/A";
        servicio.PrecioManoObra = 0;
        servicio.Confirmado = false;
        servicio.Viaticos = "N/A";
        servicio.ManoObraPersonal = 0;
     }

}
